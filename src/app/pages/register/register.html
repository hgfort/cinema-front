<div class="auth-page">
  <section class="container auth-container">
    <form class="auth-form" (ngSubmit)="onSubmit()" [formGroup]="registerForm">
      <h2>Создание новой учетной записи</h2>
      
      <!-- Имя -->
      <div class="form-group">
        <label>Имя *</label>
        <input 
          type="text" 
          formControlName="name"
          placeholder="Ваше имя"
          [class.error]="name?.invalid && name?.touched">
        
        @if (name?.invalid && name?.touched) {
          <div class="error-message">
            @if (name?.errors?.['required']) {
              Имя обязательно
            }
            @if (name?.errors?.['minlength']) {
              Минимум 2 символа
            }
            @if (name?.errors?.['maxlength']) {
              Максимум 40 символов
            }
          </div>
        }
      </div>
      
      <!-- Фамилия -->
      <div class="form-group">
        <label>Фамилия *</label>
        <input 
          type="text" 
          formControlName="surname"
          placeholder="Ваша фамилия"
          [class.error]="surname?.invalid && surname?.touched">
        
        @if (surname?.invalid && surname?.touched) {
          <div class="error-message">
            @if (surname?.errors?.['required']) {
              Фамилия обязательна
            }
            @if (surname?.errors?.['minlength']) {
              Минимум 2 символа
            }
            @if (surname?.errors?.['maxlength']) {
              Максимум 40 символов
            }
          </div>
        }
      </div>
      
      <!-- Email -->
      <div class="form-group">
        <label>Email *</label>
        <input 
          type="email" 
          formControlName="email"
          placeholder="user@example.com"
          [class.error]="email?.invalid && email?.touched">
        
        @if (email?.invalid && email?.touched) {
          <div class="error-message">
            @if (email?.errors?.['required']) {
              Email обязателен
            }
            @if (email?.errors?.['email']) {
              Некорректный email
            }
            @if (email?.errors?.['maxlength']) {
              Максимум 100 символов
            }
          </div>
        }
      </div>
      
      <!-- Дата рождения -->
      <div class="form-group">
        <label>Дата рождения *</label>
        <input 
          type="date" 
          formControlName="birthDate"
          [max]="maxBirthDate"
          [class.error]="birthDate?.invalid && birthDate?.touched">
        
        @if (birthDate?.invalid && birthDate?.touched) {
          <div class="error-message">
            @if (birthDate?.errors?.['required']) {
              Дата рождения обязательна
            }
            @if (birthDate?.errors?.['futureDate']) {
              Дата не может быть в будущем
            }
            @if (birthDate?.errors?.['underage']) {
              Должно быть 18 лет или больше
            }
          </div>
        }
      </div>
      
      <!-- Пароль -->
      <div class="form-group">
        <label>Пароль *</label>
        <input 
          type="password" 
          formControlName="password"
          placeholder="Не менее 6 символов"
          [class.error]="password?.invalid && password?.touched">
        
        @if (password?.invalid && password?.touched) {
          <div class="error-message">
            @if (password?.errors?.['required']) {
              Пароль обязателен
            }
            @if (password?.errors?.['minlength']) {
              Минимум 6 символов
            }
            @if (password?.errors?.['maxlength']) {
              Максимум 100 символов
            }
          </div>
        }
      </div>
      
      <!-- Подтверждение пароля -->
      <div class="form-group">
        <label>Подтверждение пароля *</label>
        <input 
          type="password" 
          formControlName="confirmPassword"
          placeholder="Повторите пароль"
          [class.error]="confirmPassword?.invalid && confirmPassword?.touched">
        
        @if (confirmPassword?.invalid && confirmPassword?.touched) {
          <div class="error-message">
            @if (confirmPassword?.errors?.['required']) {
              Подтверждение пароля обязательно
            }
          </div>
        }
        
        @if (registerForm.errors?.['passwordMismatch'] && password?.touched && confirmPassword?.touched) {
          <div class="error-message">
            Пароли не совпадают
          </div>
        }
      </div>
      
      <!-- Сообщения об ошибках/успехе -->
      @if (errorMessage) {
        <div class="alert alert-error">
          {{ errorMessage }}
        </div>
      }
      
      @if (successMessage) {
        <div class="alert alert-success">
          {{ successMessage }}
        </div>
      }
      
      <!-- Кнопки -->
      <div class="form-actions">
        <button 
          type="submit" 
          class="btn" 
          [disabled]="registerForm.invalid || isLoading">
          @if (isLoading) {
            Регистрация...
          } @else {
            Зарегистрироваться
          }
        </button>
        <a class="link" routerLink="/login">Уже есть аккаунт</a>
      </div>
    </form>
  </section>
</div>