<!-- <main class="container">
  <div class="page-header">
    <h1>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∏–ª—å–º</h1>
    <div class="header-actions">
      <a routerLink="/admin/movies" class="btn btn-outline">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
    </div>
  </div>


  <div *ngIf="successMessage" class="alert alert-success">
    <span class="icon">‚úì</span>
    {{ successMessage }}
    <p class="redirect-message">–ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã...</p>
  </div>

  <div *ngIf="errorMessage" class="alert alert-error">
    <span class="icon">‚úó</span>
    {{ errorMessage }}
  </div>

  <div class="form-container">
    <form (ngSubmit)="addMovie()" #movieForm="ngForm" class="movie-form">

      <div class="form-section">
        <h3>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        
        <div class="form-group">
          <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ <span class="required">*</span></label>
          <input 
            type="text" 
            id="title" 
            [(ngModel)]="movie.title" 
            name="title" 
            required
            placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞"
            [disabled]="isSubmitting">
        </div>

        <div class="form-group">
          <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ <span class="required">*</span></label>
          <textarea 
            id="description" 
            rows="4" 
            [(ngModel)]="movie.description" 
            name="description" 
            required
            placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞"
            [disabled]="isSubmitting"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="releaseDate">–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞ <span class="required">*</span></label>
            <input 
              type="date" 
              id="releaseDate" 
              [(ngModel)]="movie.releaseDate" 
              name="releaseDate" 
              required
              [disabled]="isSubmitting">
          </div>

          <div class="form-group">
            <label for="duration">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω) <span class="required">*</span></label>
            <input 
              type="number" 
              id="duration" 
              [(ngModel)]="movie.duration" 
              name="duration" 
              required
              min="1"
              placeholder="120"
              [disabled]="isSubmitting">
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>–ñ–∞–Ω—Ä—ã</h3>
        <div class="genres-grid">
          <label *ngFor="let genre of genreOptions" class="genre-checkbox"
                 [class.disabled]="isSubmitting">
            <input 
              type="checkbox" 
              [checked]="movie.genres.includes(genre)" 
              (change)="!isSubmitting && toggleGenre(genre)"
              [disabled]="isSubmitting">
            <span class="checkbox-custom"></span>
            <span class="genre-label">{{ genre | titlecase }}</span>
          </label>
        </div>
      </div>

      <div class="form-section">
        <h3>–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="directorId">ID —Ä–µ–∂–∏—Å—Å–µ—Ä–∞ <span class="required">*</span></label>
            <input 
              type="number" 
              id="directorId" 
              [(ngModel)]="movie.directorId" 
              name="directorId" 
              required
              min="1"
              placeholder="1"
              [disabled]="isSubmitting">
          </div>

          <div class="form-group">
            <label for="countryId">ID —Å—Ç—Ä–∞–Ω—ã <span class="required">*</span></label>
            <input 
              type="number" 
              id="countryId" 
              [(ngModel)]="movie.countryId" 
              name="countryId" 
              required
              min="1"
              placeholder="1"
              [disabled]="isSubmitting">
          </div>

          <div class="form-group">
            <label for="ageRating">–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ <span class="required">*</span></label>
            <select 
              id="ageRating" 
              [(ngModel)]="movie.ageRating" 
              name="ageRating" 
              required
              [disabled]="isSubmitting">
              <option value="0+">0+</option>
              <option value="6+">6+</option>
              <option value="12+">12+</option>
              <option value="16+">16+</option>
              <option value="18+">18+</option>
            </select>
          </div>
        </div>
      </div>


      <div class="form-actions">
        <button 
          type="submit" 
          class="btn btn-primary" 
          [disabled]="movieForm.invalid || isSubmitting">
          <span *ngIf="!isSubmitting">–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º</span>
          <span *ngIf="isSubmitting" class="loading-text">
            <span class="spinner"></span> –î–æ–±–∞–≤–ª–µ–Ω–∏–µ...
          </span>
        </button>
        
        <button 
          type="button" 
          class="btn btn-outline" 
          (click)="resetForm()"
          [disabled]="isSubmitting">
          –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
        </button>
        
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="navigateToMovies()" 
          [disabled]="isSubmitting">
          –û—Ç–º–µ–Ω–∞
        </button>
      </div>
    </form>
  </div>
</main> -->

<!-- admin-movies-add.html -->
<main class="container">
  <div class="page-header">
    <h1>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∏–ª—å–º</h1>
    <div class="header-actions">
      <a routerLink="/admin/movies" class="btn btn-outline">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
    </div>
  </div>

  <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ -->
  <div *ngIf="successMessage" class="alert alert-success">
    <span class="icon">‚úì</span>
    {{ successMessage }}
    <p class="redirect-message">–ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã...</p>
  </div>

  <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
  <div *ngIf="errorMessage" class="alert alert-error">
    <span class="icon">‚úó</span>
    {{ errorMessage }}
  </div>

  <div class="form-container">
    <form (ngSubmit)="addMovie()" #movieForm="ngForm" class="movie-form">
      
      <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="form-section">
        <h3>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        
        <div class="form-group">
          <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ <span class="required">*</span></label>
          <input 
            type="text" 
            id="title" 
            [(ngModel)]="movie.title" 
            name="title" 
            required
            placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞"
            [disabled]="isSubmitting || isLoading">
        </div>

        <div class="form-group">
          <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ <span class="required">*</span></label>
          <textarea 
            id="description" 
            rows="4" 
            [(ngModel)]="movie.description" 
            name="description" 
            required
            placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞"
            [disabled]="isSubmitting || isLoading"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="releaseDate">–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞ <span class="required">*</span></label>
            <input 
              type="date" 
              id="releaseDate" 
              [(ngModel)]="movie.releaseDate" 
              name="releaseDate" 
              required
              [disabled]="isSubmitting || isLoading">
          </div>

          <div class="form-group">
            <label for="duration">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω) <span class="required">*</span></label>
            <input 
              type="number" 
              id="duration" 
              [(ngModel)]="movie.duration" 
              name="duration" 
              required
              min="1"
              placeholder="120"
              [disabled]="isSubmitting || isLoading">
          </div>
        </div>
      </div>

      <!-- –†–µ–∂–∏—Å—Å–µ—Ä -->
      <div class="form-section">
        <h3>–†–µ–∂–∏—Å—Å–µ—Ä <span class="required">*</span></h3>
        
        <div class="form-group">
          <div class="selection-mode">
            <label class="radio-label">
              <input 
                type="radio" 
                name="directorMode" 
                value="existing"
                [(ngModel)]="directorSelectionMode"
                [disabled]="isSubmitting || isLoading">
              <span class="radio-custom"></span>
              <span class="radio-text">–í—ã–±—Ä–∞—Ç—å –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö</span>
            </label>
            
            <label class="radio-label">
              <input 
                type="radio" 
                name="directorMode" 
                value="new"
                [(ngModel)]="directorSelectionMode"
                [disabled]="isSubmitting || isLoading">
              <span class="radio-custom"></span>
              <span class="radio-text">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ</span>
            </label>
          </div>
        </div>

        <!-- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–∂–∏—Å—Å–µ—Ä—ã -->
        <div *ngIf="directorSelectionMode === 'existing'" class="director-selection">
          <div class="search-box">
            <input 
              type="text" 
              [(ngModel)]="directorSearchTerm" 
              placeholder="–ü–æ–∏—Å–∫ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞..."
              [disabled]="isSubmitting || isLoading"
              name="directorSearch">
            <span class="search-icon">üîç</span>
          </div>
          
          <div *ngIf="isLoading" class="loading-indicator">
            <span class="spinner-small"></span>
            <span>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤...</span>
          </div>
          
          <div *ngIf="!isLoading && filteredDirectors.length === 0" class="empty-list">
            <p>–†–µ–∂–∏—Å—Å–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
          </div>
          
          <div class="director-list" *ngIf="!isLoading && filteredDirectors.length > 0">
            <div 
              *ngFor="let director of filteredDirectors" 
              class="director-item"
              [class.selected]="selectedDirector?.directorId === director.directorId"
              (click)="!isSubmitting && selectDirector(director)"
              [class.disabled]="isSubmitting">
              <div class="director-info">
                <span class="director-name">{{ director.directorNameAndSurname }}</span>
              </div>
              <div class="director-id">ID: {{ director.directorId }}</div>
            </div>
          </div>
          
          <div *ngIf="selectedDirector" class="selected-info">
            <span>–í—ã–±—Ä–∞–Ω: <strong>{{ selectedDirector.directorNameAndSurname }}</strong></span>
          </div>
        </div>

       <!-- –ù–æ–≤—ã–π —Ä–µ–∂–∏—Å—Å–µ—Ä -->
<div *ngIf="directorSelectionMode === 'new'" class="new-director-form">
  <div class="form-row">
    <div class="form-group">
      <label for="newDirectorName">–ò–º—è <span class="required">*</span></label>
      <input 
        type="text" 
        id="newDirectorName" 
        [(ngModel)]="newDirectorName" 
        name="newDirectorName"
        placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"
        [disabled]="isSubmitting || isLoading || isCreatingDirector">
    </div>
    
    <div class="form-group">
      <label for="newDirectorSurname">–§–∞–º–∏–ª–∏—è <span class="required">*</span></label>
      <input 
        type="text" 
        id="newDirectorSurname" 
        [(ngModel)]="newDirectorSurname" 
        name="newDirectorSurname"
        placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é"
        [disabled]="isSubmitting || isLoading || isCreatingDirector">
    </div>
  </div>
  
  <div class="form-row">
    <div class="form-group">
      <label for="newDirectorBirthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
      <input 
        type="date" 
        id="newDirectorBirthDate" 
        [(ngModel)]="newDirectorBirthDate" 
        name="newDirectorBirthDate"
        [disabled]="isSubmitting || isLoading || isCreatingDirector">
    </div>
  </div>
  
  <!-- –í—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞ -->
  <div class="form-section">
    <h4>–°—Ç—Ä–∞–Ω–∞ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞ <span class="required">*</span></h4>
    
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="directorCountrySearchTerm" 
        placeholder="–ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω—ã –¥–ª—è —Ä–µ–∂–∏—Å—Å–µ—Ä–∞..."
        [disabled]="isSubmitting || isLoading || isCreatingDirector"
        name="directorCountrySearch">
      <span class="search-icon">üîç</span>
    </div>
    
    <div class="country-list" *ngIf="filteredDirectorCountries.length > 0">
      <div 
        *ngFor="let country of filteredDirectorCountries" 
        class="country-item"
        [class.selected]="selectedDirectorCountry?.countryId === country.countryId"
        (click)="!isCreatingDirector && selectDirectorCountry(country)"
        [class.disabled]="isCreatingDirector">
        <div class="country-info">
          <span class="country-name">{{ country.countryName }}</span>
        </div>
        <div class="country-id">ID: {{ country.countryId }}</div>
      </div>
    </div>
    
    <div *ngIf="selectedDirectorCountry" class="selected-info">
      <span>–í—ã–±—Ä–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∞: <strong>{{ selectedDirectorCountry.countryName }}</strong></span>
    </div>
  </div>
  
  <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∂–∏—Å—Å–µ—Ä–∞ -->
  <div class="form-actions director-actions">
    <button 
      type="button" 
      class="btn btn-primary" 
      (click)="createNewDirector()"
      [disabled]="isCreatingDirector || !newDirectorName.trim() || !newDirectorSurname.trim() || !selectedDirectorCountry">
      <span *ngIf="!isCreatingDirector">–°–æ–∑–¥–∞—Ç—å —Ä–µ–∂–∏—Å—Å–µ—Ä–∞</span>
      <span *ngIf="isCreatingDirector" class="loading-text">
        <span class="spinner-small"></span> –°–æ–∑–¥–∞–Ω–∏–µ...
      </span>
    </button>
  </div>
  
  <div class="note">
    <small>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ù–æ–≤—ã–π —Ä–µ–∂–∏—Å—Å–µ—Ä –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –µ–≥–æ –¥–ª—è —Ñ–∏–ª—å–º–∞.</small>
  </div>
</div>

        
      </div>

      <!-- –°—Ç—Ä–∞–Ω–∞ -->
      <div class="form-section">
        <h3>–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ <span class="required">*</span></h3>
        
        <div class="search-box">
          <input 
            type="text" 
            [(ngModel)]="countrySearchTerm" 
            placeholder="–ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω—ã..."
            [disabled]="isSubmitting || isLoading"
            name="countrySearch">
          <span class="search-icon">üîç</span>
        </div>
        
        <div *ngIf="isLoading" class="loading-indicator">
          <span class="spinner-small"></span>
          <span>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω...</span>
        </div>
        
        <div *ngIf="!isLoading && filteredCountries.length === 0" class="empty-list">
          <p>–°—Ç—Ä–∞–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
        </div>
        
        <div class="country-list" *ngIf="!isLoading && filteredCountries.length > 0">
          <div 
            *ngFor="let country of filteredCountries" 
            class="country-item"
            [class.selected]="selectedCountry?.countryId === country.countryId"
            (click)="!isSubmitting && selectCountry(country)"
            [class.disabled]="isSubmitting">
            <div class="country-info">
              <span class="country-name">{{ country.countryName }}</span>
              <span class="country-details">
                {{ country.filmList?.length || 0 }} —Ñ–∏–ª—å–º–æ–≤
              </span>
            </div>
            <div class="country-id">ID: {{ country.countryId }}</div>
          </div>
        </div>
        
        <div *ngIf="selectedCountry" class="selected-info">
          <span>–í—ã–±—Ä–∞–Ω–∞: <strong>{{ selectedCountry.countryName }}</strong></span>
        </div>
      </div>

      <!-- –ñ–∞–Ω—Ä—ã -->
      <div class="form-section">
        <h3>–ñ–∞–Ω—Ä—ã</h3>
        <div class="genres-grid">
          <label *ngFor="let genre of genreOptions" class="genre-checkbox"
                 [class.disabled]="isSubmitting || isLoading">
            <input 
              type="checkbox" 
              [checked]="movie.genres.includes(genre)" 
              (change)="!isSubmitting && toggleGenre(genre)"
              [disabled]="isSubmitting || isLoading">
            <span class="checkbox-custom"></span>
            <span class="genre-label">{{ genre | titlecase }}</span>
          </label>
        </div>
      </div>

      <!-- –í–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥ -->
      <div class="form-section">
        <h3>–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ <span class="required">*</span></h3>
        <div class="form-group">
          <select 
            [(ngModel)]="movie.ageRating" 
            name="ageRating" 
            required
            [disabled]="isSubmitting || isLoading">
            <option value="0+">0+</option>
            <option value="6+">6+</option>
            <option value="12+">12+</option>
            <option value="16+">16+</option>
            <option value="18+">18+</option>
          </select>
        </div>
      </div>

      <!-- –î–µ–π—Å—Ç–≤–∏—è -->
      <div class="form-actions">
        <button 
          type="submit" 
          class="btn btn-primary" 
          [disabled]="movieForm.invalid || isSubmitting || isLoading">
          <span *ngIf="!isSubmitting">–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º</span>
          <span *ngIf="isSubmitting" class="loading-text">
            <span class="spinner"></span> –î–æ–±–∞–≤–ª–µ–Ω–∏–µ...
          </span>
        </button>
        
        <button 
          type="button" 
          class="btn btn-outline" 
          (click)="resetForm()"
          [disabled]="isSubmitting || isLoading">
          –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
        </button>
        
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="navigateToMovies()" 
          [disabled]="isSubmitting || isLoading">
          –û—Ç–º–µ–Ω–∞
        </button>
      </div>
    </form>
  </div>
</main>