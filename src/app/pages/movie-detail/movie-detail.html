<div class="movie-detail-page">
  <div class="container">
    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <button class="back-btn" (click)="goBack()">
      ‚Üê –ù–∞–∑–∞–¥ –∫ –∞—Ñ–∏—à–µ
    </button>
    
    @if (isLoading) {
      <div class="loading">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–µ...</p>
      </div>
    }
    
    @if (errorMessage) {
      <div class="error-message">
        <h3>{{ errorMessage }}</h3>
        <a class="btn" routerLink="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
      </div>
    }
    
    @if (movie && !isLoading) {
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="movie-header">
        <div class="movie-poster-large">
          @if (movie.posterUrl) {
            <img [src]="movie.posterUrl" [alt]="movie.title">
          } @else {
            <div class="poster-placeholder-large">üé¨</div>
          }
        </div>
        
        <div class="movie-info">
          <div class="movie-meta-top">
            <span class="age-badge">{{ movie.ageRating }}</span>
            <span class="duration">{{ movie.duration }} –º–∏–Ω</span>
            <span class="release-date">
              {{ movie.releaseDate | date:'yyyy' }} –≥–æ–¥
            </span>
          </div>
          
          <h1 class="movie-title">{{ movie.title }}</h1>
          
          <div class="genres">
            @for (genre of movie.genres; track genre) {
              <span class="genre-badge">{{ genre }}</span>
            }
          </div>
          
          <div class="movie-actions">
            @if (movie.trailerUrl) {
              <a class="btn btn-trailer" [href]="movie.trailerUrl" target="_blank" rel="noopener">
                <span class="icon">üé¨</span> –°–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–µ–π–ª–µ—Ä
              </a>
            }
            <button class="btn btn-outline">
              <span class="icon">‚ù§Ô∏è</span> –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
            </button>
          </div>
          
          <div class="movie-description-full">
            <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
            <p>{{ movie.description }}</p>
          </div>
          
          <div class="movie-details">
            <div class="detail-item">
              <strong>–†–µ–∂–∏—Å—Å–µ—Ä:</strong> –î–µ–Ω–∏ –í–∏–ª—å–Ω—ë–≤
            </div>
            <div class="detail-item">
              <strong>–°—Ç—Ä–∞–Ω–∞:</strong> –°–®–ê, –ö–∞–Ω–∞–¥–∞
            </div>
            <div class="detail-item">
              <strong>–í —Ä–æ–ª—è—Ö:</strong> –¢–∏–º–æ—Ç—ñ –®–∞–ª–∞–º–µ, –ó–µ–Ω–¥–µ—è, –†–µ–±–µ–∫–∫–∞ –§–µ—Ä–≥—é—Å–æ–Ω
            </div>
          </div>
        </div>
      </div>
      
      <!-- –ë–ª–æ–∫ —Å —Å–µ–∞–Ω—Å–∞–º–∏ -->
      <div class="sessions-section">
        <div class="section-header">
          <h2>üìÖ –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∞–Ω—Å</h2>
          
          <div class="date-filters">
            <button 
              class="filter-btn" 
              [class.active]="activeDateFilter === 'today'"
              (click)="setDateFilter('today')">
              –°–µ–≥–æ–¥–Ω—è
            </button>
            <button 
              class="filter-btn" 
              [class.active]="activeDateFilter === 'tomorrow'"
              (click)="setDateFilter('tomorrow')">
              –ó–∞–≤—Ç—Ä–∞
            </button>
            <button 
              class="filter-btn" 
              [class.active]="activeDateFilter === 'week'"
              (click)="setDateFilter('week')">
              –ù–∞ –Ω–µ–¥–µ–ª–µ
            </button>
          </div>
        </div>
        
        @if (filteredSessions.length === 0) {
          <div class="no-sessions">
            <p>üòî –ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É —Å–µ–∞–Ω—Å–æ–≤ –Ω–µ—Ç</p>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é –¥–∞—Ç—É –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥—Ä—É–≥–∏–µ —Ñ–∏–ª—å–º—ã</p>
          </div>
        } @else {
          <div class="sessions-grid">
            @for (session of filteredSessions; track session.sessionId) {
              <div class="session-card" [class.soon]="isSessionSoon(session)">
                <div class="session-time">
                  <div class="time">{{ formatSessionTime(session.dateTime) }}</div>
                  <div class="date">{{ formatSessionDate(session.dateTime) }}</div>
                </div>
                
                <div class="session-info">
                  <h3>{{ getHallName(session.hallId) }}</h3>
                  <p class="hall-type">{{ getHallType(session.hallId) }}</p>
                  <p class="session-status">
                    @if (isSessionSoon(session)) {
                      <span class="soon-badge">–°–∫–æ—Ä–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è</span>
                    } @else {
                      <span class="status-active">–î–æ—Å—Ç—É–ø–Ω–æ</span>
                    }
                  </p>
                </div>
                
                <div class="session-price">
                  <div class="price">{{ getTicketPrice(session.hallId) }} ‚ÇΩ</div>
                  <small>–æ—Ç –º–µ—Å—Ç–∞</small>
                </div>
                
                <div class="session-actions">
                  <button 
                    class="btn" 
                    [disabled]="isSessionSoon(session)"
                    (click)="navigateToBooking(session.sessionId)">
                    –í—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–∞
                  </button>
                </div>
              </div>
            }
          </div>
        }
      </div>
      
      <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="additional-info">
        <h3>üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        <div class="info-grid">
          <div class="info-card">
            <h4>üéüÔ∏è –í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ</h4>
            <p>–î–ª—è –ª–∏—Ü —Å—Ç–∞—Ä—à–µ {{ movie.ageRating }}</p>
          </div>
          <div class="info-card">
            <h4>‚è±Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h4>
            <p>{{ movie.duration }} –º–∏–Ω—É—Ç</p>
            <small>–° —É—á–µ—Ç–æ–º —Ç–∏—Ç—Ä–æ–≤</small>
          </div>
          <div class="info-card">
            <h4>üé≠ –§–æ—Ä–º–∞—Ç—ã –ø–æ–∫–∞–∑–∞</h4>
            <p>2D ‚Ä¢ IMAX ‚Ä¢ 4DX</p>
            <small>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–ª–∞</small>
          </div>
          <div class="info-card">
            <h4>üí∫ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
            <p>–î–æ 15 –º–µ—Å—Ç –≤ –æ–¥–Ω–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏</p>
            <small>–û—Ç–º–µ–Ω–∞ –∑–∞ 1 —á–∞—Å –¥–æ —Å–µ–∞–Ω—Å–∞</small>
          </div>
        </div>
      </div>
    }
  </div>
</div>